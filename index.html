<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roots to Blooms — Home</title>

<style>
:root{
  --brand-green:#4EA337;
  --dark:#254D32;
  --accent:#c6e3d2;
}

/* ====== General ====== */
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#fafafa;color:#333;}
h1,h2{margin:16px 0 8px 0;text-align:center;color:var(--dark);}
a{text-decoration:none;color:inherit;}

/* ====== Navigation ====== */
.topnav{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 24px;
  background:var(--dark);
  position:sticky;
  top:0;
  z-index:1000;
}
.topnav .logo img{height:48px;}
.nav-links a{
  color:white;
  font-weight:700;
  margin-left:20px;
  padding:8px 12px;
  border-radius:6px;
  transition:0.2s;
}
.nav-links a:hover{background:var(--brand-green);}

/* ====== Dropdown ====== */
.dropdown{
  position:relative;
  display:inline-block;
}
.dropbtn{
  background:var(--dark);
  color:white;
  font-weight:700;
  padding:8px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.dropbtn:hover{
  background:var(--brand-green);
}
.dropdown-content{
  display:none;
  position:absolute;
  background:#fff;
  min-width:160px;
  box-shadow:0 8px 16px rgba(0,0,0,0.2);
  border-radius:6px;
  overflow:hidden;
  z-index:1000;
}
.dropdown-content a{
  color:var(--dark);
  padding:12px 16px;
  display:block;
  font-weight:700;
}
.dropdown-content a:hover{
  background:var(--accent);
}
.dropdown:hover .dropdown-content{
  display:block;
}

/* ====== Product Grid ====== */
.product-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:16px;
  padding:0 20px 40px 20px;
  max-width:1200px;
  margin:auto;
}
.product-card{
  background:#fff;
  border-radius:12px;
  box-shadow:0 6px 12px rgba(0,0,0,0.08);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  cursor:pointer;
  transition:transform 0.15s;
}
.product-card:hover{transform:scale(1.03);}
.product-image{
  width:100%;
  height:160px;
  object-fit:cover;
  background:#f3f3f3;
}
.product-title{
  font-weight:800;
  padding:8px 12px 4px 12px;
  font-size:15px;
  color:var(--dark);
  text-align:center;
}
.product-price{
  padding:0 12px 8px 12px;
  font-weight:700;
  text-align:center;
  color:#555;
  font-size:14px;
}
</style>
</head>

<body>

<!-- NAVIGATION -->
<nav class="topnav">
  <a href="/" class="logo"><img src="IMG_1466.png" alt="Roots to Blooms Logo"></a>
  <div class="nav-links">
    <a href="/">Home</a>

    <div class="dropdown">
      <button class="dropbtn">Shop ▼</button>
      <div class="dropdown-content">
        <a href="shop-houseplants.html">Houseplants</a>
        <a href="shop-annuals.html">Annuals</a>
        <a href="shop-vegetable-starters.html">Vegetable Starters</a>
      </div>
    </div>

    <a href="/about.html">About</a>
    <a href="/contact.html">Contact</a>
  </div>
</nav>

<h1>Roots to Blooms</h1>

<h2 id="houseplantsTitle">Houseplants</h2>
<div id="houseplantsGrid" class="product-grid"></div>

<h2 id="annualsTitle">Annuals</h2>
<div id="annualsGrid" class="product-grid"></div>

<h2 id="vegetablesTitle">Vegetable Starters</h2>
<div id="vegetablesGrid" class="product-grid"></div>

<script>
// ================== HOMEPAGE PRODUCTS ==================
const SHEET_ENDPOINT="https://script.google.com/macros/s/AKfycbxKVOYtyszNwsdNYX8iPZtYyYqDkxryKijLTNH73NqvjPWepLygI4UZ5jZYylBPytPF0A/exec";

async function loadHomeProducts(){
  const res = await fetch(`${SHEET_ENDPOINT}?ts=${Date.now()}`);
  const products = await res.json();

  function renderGrid(gridId, titleId, category, link){
    const grid = document.getElementById(gridId);
    const title = document.getElementById(titleId);

    const filtered = products.filter(p => (p.categories || []).map(c=>c.toLowerCase()).includes(category.toLowerCase()));

    if(filtered.length === 0){
      grid.style.display = "none";
      title.style.display = "none";
      return;
    }

    grid.style.display = "grid";
    title.style.display = "block";
    grid.innerHTML = '';

    filtered.forEach(p=>{
      const card = document.createElement('a');
      card.href = link;
      card.className = 'product-card';
      card.innerHTML = `
        <img class="product-image" src="${p.photo}" alt="${p.name}">
        <div class="product-title">${p.name}</div>
        <div class="product-price">$${Number(p.price).toFixed(2)}</div>
      `;
      grid.appendChild(card);
    });
  }

  renderGrid('houseplantsGrid','houseplantsTitle','houseplants','shop-houseplants.html');
  renderGrid('annualsGrid','annualsTitle','annuals','shop-annuals.html');
  renderGrid('vegetablesGrid','vegetablesTitle','vegetable starters','shop-vegetable-starters.html');
}

loadHomeProducts();
</script>
</body>
</html>
